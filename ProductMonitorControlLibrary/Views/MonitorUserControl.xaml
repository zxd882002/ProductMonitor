<UserControl x:Class="ProductMonitorControlLibrary.Views.MonitorUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:ProductMonitorControlLibrary.Views"
             xmlns:prism="http://prismlibrary.com/"
             prism:ViewModelLocator.AutoWireViewModel="True"
             mc:Ignorable="d"
             Height="675" Width="1200"
             xmlns:vm="clr-namespace:ProductMonitorControlLibrary.ViewModels"
             d:DataContext="{d:DesignInstance Type=vm:MonitorUserControlViewModel, IsDesignTimeCreatable=True}">
    <Grid>
        <Grid.Resources>
            <ResourceDictionary>
                <ResourceDictionary.MergedDictionaries>
                    <ResourceDictionary Source="../Resources/ButtonResources/ButtonStyleDictionary.xaml" />
                    <ResourceDictionary Source="../Resources/GroupBoxResources/GroupBoxResourceDictionary.xaml" />
                </ResourceDictionary.MergedDictionaries>
            </ResourceDictionary>
        </Grid.Resources>

        <Grid.RowDefinitions>
            <RowDefinition Height="50" />
            <RowDefinition Height="*" />
            <RowDefinition Height="150" />
        </Grid.RowDefinitions>

        <!-- Header: 日期，计数，配置 -->
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- Date -->
            <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Center"
                        VerticalAlignment="Center">
                <TextBlock Text="{Binding Time}" Foreground="White" FontSize="30"
                           FontFamily="../Resources/Fonts/#DS-Digital" />
                <StackPanel Orientation="Vertical" Margin="15 0 0 0 ">
                    <TextBlock Text="{Binding Date}" Foreground="White" FontSize="10" TextAlignment="Right" />
                    <TextBlock Text="{Binding Week}" Foreground="White" FontSize="10" TextAlignment="Right" />
                </StackPanel>
            </StackPanel>

            <!-- Count -->
            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Left">
                <StackPanel.Resources>
                    <DataTemplate x:Key="DigitCount">
                        <Border Width="15" Background="#3318aabd" Margin="2 0">
                            <TextBlock Text="{Binding}"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Center"
                                       FontSize="16"
                                       Foreground="White" />
                        </Border>
                    </DataTemplate>
                </StackPanel.Resources>

                <TextBlock Text="机台&#13;总数"
                           Foreground="#99ffffff" FontSize="10" VerticalAlignment="Center" Margin="10 0" />
                <ItemsControl ItemsSource="{Binding MachineCount}" ItemTemplate="{StaticResource DigitCount}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>

                <TextBlock Text="生产计数"
                           Foreground="#99ffffff" FontSize="10" VerticalAlignment="Center" Margin="20 0 10 0" />
                <ItemsControl ItemsSource="{Binding ProductCount}" ItemTemplate="{StaticResource DigitCount}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>

                <TextBlock Text="不良计数"
                           Foreground="#99ffffff" FontSize="10" VerticalAlignment="Center" Margin="20 0 10 0" />
                <ItemsControl ItemsSource="{Binding BadCount}" ItemTemplate="{StaticResource DigitCount}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </StackPanel>

            <!-- Configure Button -->
            <Button Grid.Column="1" Height="35" Width="80" Margin="20 0"
                    HorizontalAlignment="Right" VerticalAlignment="Center"
                    Style="{StaticResource IconButtonStyle}"
                    Tag="&#xe60c;" Content="配置" />
        </Grid>

        <!-- 主体 3列-->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- 列1: 环境，产能，质量 -->
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!-- 环境 -->
                <GroupBox Grid.Row="0" Header="环境" Style="{StaticResource GroudBoxStyle}">
                    <local:ItemListUserControl ItemList="{Binding EnvironmentList}" />
                </GroupBox>
                <!-- 产能 -->
                <GroupBox Grid.Row="1" Header="产能" Style="{StaticResource GroudBoxStyle}">
                    <local:ProductivityUserControl />
                </GroupBox>
                <!-- 质量 -->
                <GroupBox Grid.Row="2" Header="质量" Style="{StaticResource GroudBoxStyle}">
                    <local:QualityUserControl />
                </GroupBox>
            </Grid>

            <!-- 列2: 图片，报警记录，数据异常报警比例-->
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="1.5*" />
                </Grid.RowDefinitions>
                <!-- 图片 -->
                <local:ImageUserControl Grid.Row="0" />

                <!-- 报警记录 -->
                <local:AlarmUserControl Grid.Row="1" />

                <!-- 报警比例 -->
                <GroupBox Grid.Row="2" Header="数据异常报警比例" Style="{StaticResource GroudBoxStyle}" Margin="0 5">
                    <local:AlarmRatioUserControl />
                </GroupBox>
            </Grid>
            <!-- 列3: 设备，能耗，人力 -->
            <Grid Grid.Column="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!-- 设备 -->
                <GroupBox Grid.Row="0" Header="设备" Style="{StaticResource GroudBoxStyle}">
                    <local:ItemListUserControl ItemList="{Binding DeviceList}" />
                </GroupBox>
                <!-- 能耗 -->
                <GroupBox Grid.Row="1" Header="能耗" Style="{StaticResource GroudBoxStyle}">
                    <local:RadarUserControl ItemList="{Binding RadarList}" />
                </GroupBox>
                <!-- 人力 -->
                <GroupBox Grid.Row="2" Header="人力" Style="{StaticResource GroudBoxStyle}">
                    <local:HumanUserControl />
                </GroupBox>

            </Grid>
        </Grid>

        <!-- Footer: 车间-->
        <ItemsControl Grid.Row="2" ItemsSource="{Binding WorkShopList}" Margin="10 0">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid Rows="1" Columns="{Binding WorkShopList.Count}">
                    </UniformGrid>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <local:WorkShopUserControl
                        WorkShopName="{Binding Name}"
                        Total="{Binding TotalCount}"
                        WorkingCount="{Binding WorkingCount}"
                        WaitingCount="{Binding WaitingCount}"
                        ErrorCount="{Binding ErrorCount}"
                        StopCount="{Binding StopCount}"
                        ShowDetailCommand="{Binding Path=DataContext.ShowDetailCommand, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}" />
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>

    </Grid>
</UserControl>